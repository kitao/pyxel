<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/gh/kitao/pyxel@2.5.9/wasm/pyxel.js"></script>
  </head>
  <body>
    <pyxel-run
      script="
        import js, base64, pyxel.cli
        with open('my_resource.pyxres', 'wb') as f:
          f.write(base64.b64decode(js.window.parent.res))
        pyxel.cli.edit_pyxel_resource('my_resource.pyxres')
      "
    ></pyxel-run>
    <script>
      const waitForInit = () => {
        if (window.pyxelContext?.initialized) {
          window._savePyxelFile = (filename) => {};
        } else {
          setTimeout(waitForInit, 50);
        }
      };
      waitForInit();
    </script>
  </body>
</html>
